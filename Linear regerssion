
import pandas as pd
import matplotlib.pyplot as plt
df=pd.read_csv('/home/ise/1nt19is174/Food-Truck.csv')
df
X	Y
0	6.1101	17.59200
1	5.5277	9.13020
2	8.5186	13.66200
3	7.0032	11.85400
4	5.8598	6.82330
...	...	...
92	5.8707	7.20290
93	5.3054	1.98690
94	8.2934	0.14454
95	13.3940	9.05510
96	5.4369	0.61705
97 rows × 2 columns

x_mean=df['X'].mean()
y_mean=df['Y'].mean()
print(x_mean,y_mean)
8.159800000000002 5.83913505154639
df['x-x_mean']=df['X']-x_mean
df['y-y_mean']=df['Y']-y_mean
df['x-x_mean^2']=df['x-x_mean']**2
df['y-y_mean^2']=df['y-y_mean']**2
df
X	Y	x-x_mean	y-y_mean	(x-x_mean).(y-y_mean)	x-x_mean^2	y-y_mean^2
0	6.1101	17.59200	-2.0497	11.752865	-24.089847	4.201270	138.129834
1	5.5277	9.13020	-2.6321	3.291065	-8.662412	6.927950	10.831108
2	8.5186	13.66200	0.3588	7.822865	2.806844	0.128737	61.197216
3	7.0032	11.85400	-1.1566	6.014865	-6.956793	1.337724	36.178600
4	5.8598	6.82330	-2.3000	0.984165	-2.263579	5.290000	0.968581
...	...	...	...	...	...	...	...
92	5.8707	7.20290	-2.2891	1.363765	-3.121794	5.239979	1.859855
93	5.3054	1.98690	-2.8544	-3.852235	10.995820	8.147599	14.839715
94	8.2934	0.14454	0.1336	-5.694595	-0.760798	0.017849	32.428413
95	13.3940	9.05510	5.2342	3.215965	16.833004	27.396850	10.342431
96	5.4369	0.61705	-2.7229	-5.222085	14.219215	7.414184	27.270172
97 rows × 7 columns

df['(x-x_mean).(y-y_mean)']=df['x-x_mean']*df['y-y_mean']
df
X	Y	x-x_mean	y-y_mean	(x-x_mean).(y-y_mean)	x-x_mean^2	y-y_mean^2
0	6.1101	17.59200	-2.0497	11.752865	-24.089847	4.201270	138.129834
1	5.5277	9.13020	-2.6321	3.291065	-8.662412	6.927950	10.831108
2	8.5186	13.66200	0.3588	7.822865	2.806844	0.128737	61.197216
3	7.0032	11.85400	-1.1566	6.014865	-6.956793	1.337724	36.178600
4	5.8598	6.82330	-2.3000	0.984165	-2.263579	5.290000	0.968581
...	...	...	...	...	...	...	...
92	5.8707	7.20290	-2.2891	1.363765	-3.121794	5.239979	1.859855
93	5.3054	1.98690	-2.8544	-3.852235	10.995820	8.147599	14.839715
94	8.2934	0.14454	0.1336	-5.694595	-0.760798	0.017849	32.428413
95	13.3940	9.05510	5.2342	3.215965	16.833004	27.396850	10.342431
96	5.4369	0.61705	-2.7229	-5.222085	14.219215	7.414184	27.270172
97 rows × 7 columns

sum_of_XmeanYmean=df['(x-x_mean).(y-y_mean)'].sum()
sum_of_XmeanYmean
1715.219528539
sum_of_XmeanSqr=df['x-x_mean^2'].sum()
sum_of_YmeanSqr=df['y-y_mean^2'].sum()
sum_of_XmeanSqr,sum_of_YmeanSqr
(1437.6958578600002, 2914.8470516572247)
r=sum_of_XmeanYmean/(sum_of_XmeanSqr*sum_of_YmeanSqr)**0.5
r
0.8378732325263409
n=df.shape[0]
sx=(sum_of_XmeanSqr/n-1)**0.5
sy=(sum_of_YmeanSqr/n-1)**0.5
sx,sy
(3.7177421618587077, 5.389802371582251)
m=(r*sy)/sx
m
1.2147079972587373
c=y_mean-m*x_mean
c
-4.072639264485457
df['y_pred']=m*df['X']+c
df
X	Y	x-x_mean	y-y_mean	(x-x_mean).(y-y_mean)	x-x_mean^2	y-y_mean^2	y_pred
0	6.1101	17.59200	-2.0497	11.752865	-24.089847	4.201270	138.129834	3.349348
1	5.5277	9.13020	-2.6321	3.291065	-8.662412	6.927950	10.831108	2.641902
2	8.5186	13.66200	0.3588	7.822865	2.806844	0.128737	61.197216	6.274972
3	7.0032	11.85400	-1.1566	6.014865	-6.956793	1.337724	36.178600	4.434204
4	5.8598	6.82330	-2.3000	0.984165	-2.263579	5.290000	0.968581	3.045307
...	...	...	...	...	...	...	...	...
92	5.8707	7.20290	-2.2891	1.363765	-3.121794	5.239979	1.859855	3.058547
93	5.3054	1.98690	-2.8544	-3.852235	10.995820	8.147599	14.839715	2.371873
94	8.2934	0.14454	0.1336	-5.694595	-0.760798	0.017849	32.428413	6.001420
95	13.3940	9.05510	5.2342	3.215965	16.833004	27.396850	10.342431	12.197160
96	5.4369	0.61705	-2.7229	-5.222085	14.219215	7.414184	27.270172	2.531607
97 rows × 8 columns

df['error']=df['Y']-df['y_pred']
df['error^2']=df['error']**2
df
X	Y	x-x_mean	y-y_mean	(x-x_mean).(y-y_mean)	x-x_mean^2	y-y_mean^2	y_pred	error	error^2
0	6.1101	17.59200	-2.0497	11.752865	-24.089847	4.201270	138.129834	3.349348	14.242652	202.853134
1	5.5277	9.13020	-2.6321	3.291065	-8.662412	6.927950	10.831108	2.641902	6.488298	42.098009
2	8.5186	13.66200	0.3588	7.822865	2.806844	0.128737	61.197216	6.274972	7.387028	54.568179
3	7.0032	11.85400	-1.1566	6.014865	-6.956793	1.337724	36.178600	4.434204	7.419796	55.053376
4	5.8598	6.82330	-2.3000	0.984165	-2.263579	5.290000	0.968581	3.045307	3.777993	14.273234
...	...	...	...	...	...	...	...	...	...	...
92	5.8707	7.20290	-2.2891	1.363765	-3.121794	5.239979	1.859855	3.058547	4.144353	17.175662
93	5.3054	1.98690	-2.8544	-3.852235	10.995820	8.147599	14.839715	2.371873	-0.384973	0.148204
94	8.2934	0.14454	0.1336	-5.694595	-0.760798	0.017849	32.428413	6.001420	-5.856880	34.303044
95	13.3940	9.05510	5.2342	3.215965	16.833004	27.396850	10.342431	12.197160	-3.142060	9.872539
96	5.4369	0.61705	-2.7229	-5.222085	14.219215	7.414184	27.270172	2.531607	-1.914557	3.665527
97 rows × 10 columns

plot1=plt.scatter(df["X"],df["Y"])
plot2=plt.plot(df["X"],df["y_pred"])
plt.show()

sse=df['error^2'].sum()
sse
869.2078442214548
sst=df['y-y_mean^2'].sum()
sst
2914.8470516572247
df['y_pred-y_mean']=df['y_pred']-y_mean
df['y_pred-y_mean^2']=df['y_pred-y_mean']**2
df
X	Y	x-x_mean	y-y_mean	(x-x_mean).(y-y_mean)	x-x_mean^2	y-y_mean^2	y_pred	error	error^2	y_pred-y_mean	y_pred-y_mean^2
0	6.1101	17.59200	-2.0497	11.752865	-24.089847	4.201270	138.129834	3.349348	14.242652	202.853134	-2.489787	6.199039
1	5.5277	9.13020	-2.6321	3.291065	-8.662412	6.927950	10.831108	2.641902	6.488298	42.098009	-3.197233	10.222298
2	8.5186	13.66200	0.3588	7.822865	2.806844	0.128737	61.197216	6.274972	7.387028	54.568179	0.435837	0.189954
3	7.0032	11.85400	-1.1566	6.014865	-6.956793	1.337724	36.178600	4.434204	7.419796	55.053376	-1.404931	1.973832
4	5.8598	6.82330	-2.3000	0.984165	-2.263579	5.290000	0.968581	3.045307	3.777993	14.273234	-2.793828	7.805477
...	...	...	...	...	...	...	...	...	...	...	...	...
92	5.8707	7.20290	-2.2891	1.363765	-3.121794	5.239979	1.859855	3.058547	4.144353	17.175662	-2.780588	7.731670
93	5.3054	1.98690	-2.8544	-3.852235	10.995820	8.147599	14.839715	2.371873	-0.384973	0.148204	-3.467263	12.021909
94	8.2934	0.14454	0.1336	-5.694595	-0.760798	0.017849	32.428413	6.001420	-5.856880	34.303044	0.162285	0.026336
95	13.3940	9.05510	5.2342	3.215965	16.833004	27.396850	10.342431	12.197160	-3.142060	9.872539	6.358025	40.424477
96	5.4369	0.61705	-2.7229	-5.222085	14.219215	7.414184	27.270172	2.531607	-1.914557	3.665527	-3.307528	10.939744
97 rows × 12 columns

ssr=df['y_pred-y_mean^2'].sum()
ssr
2121.3425493055993
R2=ssr/sst
R2
0.7277714788155071
 
